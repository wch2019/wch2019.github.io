{"title":"mybatis实体类生成数据库","uid":"b9e36f1b31fdb7446c5124e8f6e853e3","slug":"mybatis实体类生成数据库","date":"2023-03-21T03:16:18.000Z","updated":"2023-03-21T06:47:41.029Z","comments":true,"path":"api/articles/mybatis实体类生成数据库.json","keywords":null,"cover":null,"content":"<h1 id=\"mybatis实体类生成数据库\"><a href=\"#mybatis实体类生成数据库\" class=\"headerlink\" title=\"mybatis实体类生成数据库\"></a>mybatis实体类生成数据库</h1><h2 id=\"为什么要用？\"><a href=\"#为什么要用？\" class=\"headerlink\" title=\"为什么要用？\"></a>为什么要用？</h2><p>因为数据库忘记备份，时间久了数据库没了，所以研究了一下这个东西，感谢大佬开发的反向生成，详细连接地址在文末</p>\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p>jdk版本1.7+</p>\n<h2 id=\"ACTable依赖\"><a href=\"#ACTable依赖\" class=\"headerlink\" title=\"ACTable依赖\"></a>ACTable依赖</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">&lt;dependency&gt;\n    &lt;groupId&gt;com.gitee.sunchenbin.mybatis.actable&lt;&#x2F;groupId&gt;\n    &lt;artifactId&gt;mybatis-enhance-actable&lt;&#x2F;artifactId&gt;\n    &lt;version&gt;1.5.0.RELEASE&lt;&#x2F;version&gt;\n&lt;&#x2F;dependency&gt;</code></pre>\n\n<h2 id=\"SpringBoot配置方式\"><a href=\"#SpringBoot配置方式\" class=\"headerlink\" title=\"SpringBoot配置方式\"></a>SpringBoot配置方式</h2><pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">actable:\n  table:\n    # 可以设置为create（纯创建）、add（添加新的不删除内容）、update（更新内容，推荐用）、none（啥都不干）\n    auto: create\n  model:\n    # 用于创建数据表的待扫描目录，该目录下的类如果有@Table注解，就会进行扫描\n    #你的实体类放的包\n    pack: com.xiaohai.create.entity\n  database:\n    #目前仅支持mysql\n    type: mysql\n\nmybatis:\n  mapperLocations: classpath*:com&#x2F;gitee&#x2F;sunchenbin&#x2F;mybatis&#x2F;actable&#x2F;mapping&#x2F;*&#x2F;*xml</code></pre>\n\n\n\n<p>配置解析：</p>\n<table>\n<thead>\n<tr>\n<th><strong>配置信息</strong></th>\n<th><strong>可选值值信息</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>actable.table.auto</td>\n<td>none</td>\n<td>系统不做任何处理。</td>\n</tr>\n<tr>\n<td>create</td>\n<td>系统启动后，会先将所有的表删除掉，然后根据model中配置的结构重新建表，该操作会破坏原有数据。</td>\n<td></td>\n</tr>\n<tr>\n<td>update</td>\n<td>系统启动后，会自动判断哪些表是新建的，哪些字段要修改类型等，哪些字段要删除，哪些字段要新增，该操作不会破坏原有数据。</td>\n<td></td>\n</tr>\n<tr>\n<td>add</td>\n<td>系统启动后，只做新增，比如新增表&#x2F;新增字段&#x2F;新增索引&#x2F;新增唯一约束的功能，而不会去做修改和删除的操作 (只在版本1.0.9.RELEASE及以上支持)。</td>\n<td></td>\n</tr>\n<tr>\n<td>actable.model.pack</td>\n<td>-</td>\n<td>您的model包路径，多个路径可以用分号或者逗号隔开，会递归这个目录下的全部目录中的java对象，支持类似com.bz.**.entity</td>\n</tr>\n<tr>\n<td>actable.database.type</td>\n<td>mysql</td>\n<td>这个是用来区别数据库的，预计会支持这四种数据库mysql&#x2F;oracle&#x2F;sqlserver&#x2F;postgresql，但目前仅支持mysql</td>\n</tr>\n</tbody></table>\n<h3 id=\"springboot2-0-启动类需要做如下配置-必备\"><a href=\"#springboot2-0-启动类需要做如下配置-必备\" class=\"headerlink\" title=\"springboot2.0+启动类需要做如下配置(必备)\"></a>springboot2.0+启动类需要做如下配置(必备)</h3><p>1.@ComponentScan配置，路径”com.gitee.sunchenbin.mybatis.actable.manager.*”</p>\n<p>2.@MapperScan配置，路径”com.gitee.sunchenbin.mybatis.actable.dao.*”</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@SpringBootApplication\n@MapperScan(&quot;com.gitee.sunchenbin.mybatis.actable.dao.*&quot;)\n@ComponentScan(basePackages &#x3D; &#123;&quot;com.gitee.sunchenbin.mybatis.actable.manager.*&quot;&#125;)\npublic class CreateTableApplication &#123;\n\n    public static void main(String[] args) &#123;\n       SpringApplication.run(CreateTableApplication.class, args);\n    &#125;\n\n&#125;</code></pre>\n<h2 id=\"多种定义方式\"><a href=\"#多种定义方式\" class=\"headerlink\" title=\"多种定义方式\"></a>多种定义方式</h2><h3 id=\"第一种定义方式，使用-Table和-Column方式定义\"><a href=\"#第一种定义方式，使用-Table和-Column方式定义\" class=\"headerlink\" title=\"第一种定义方式，使用@Table和@Column方式定义\"></a>第一种定义方式，使用@Table和@Column方式定义</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">Data\n@Table(name &#x3D; &quot;test&quot;)\npublic class Test extends BaseModel &#123;\n\n\t@Column(name &#x3D; &quot;id&quot;,type &#x3D; MySqlTypeConstant.INT,length &#x3D; 11,isKey &#x3D; true,isAutoIncrement &#x3D; true)\n\tprivate Integer\tid;\n\n\t@Column(name &#x3D; &quot;name&quot;,type &#x3D; MySqlTypeConstant.VARCHAR, length &#x3D; 45, defaultValue &#x3D; &quot;hello&quot;)\n\tprivate String\tname;\n\n\t@Column(name &#x3D; &quot;type&quot;,type &#x3D; MySqlTypeConstant.VARCHAR,length &#x3D; 45)\n\tprivate String\ttype;\n\n\t@Column(name &#x3D; &quot;description&quot;,type &#x3D; MySqlTypeConstant.TEXT)\n\tprivate String\tdescription;\n\n\t@Column(name &#x3D; &quot;create_time&quot;,type &#x3D; MySqlTypeConstant.DATETIME)\n\tprivate Date\tcreate_time;\n\n\t@Column(name &#x3D; &quot;update_time&quot;,type &#x3D; MySqlTypeConstant.DATETIME)\n\tprivate Date\tupdate_time;\n\n\t@Column(name &#x3D; &quot;number&quot;,type &#x3D; MySqlTypeConstant.BIGINT,length &#x3D; 5)\n\tprivate Long\tnumber;\n\n\t@Column(name &#x3D; &quot;lifecycle&quot;,type &#x3D; MySqlTypeConstant.CHAR,length &#x3D; 1)\n\tprivate String\tlifecycle;\n\n\t@Column(name &#x3D; &quot;dekes&quot;,type &#x3D; MySqlTypeConstant.DOUBLE,length &#x3D; 5,decimalLength &#x3D; 2)\n\tprivate Double\tdekes;\n&#125;\n\n</code></pre>\n\n<h3 id=\"第二种定义方式，使用-Table和-Column定义字段，具体内容用具体注解定义\"><a href=\"#第二种定义方式，使用-Table和-Column定义字段，具体内容用具体注解定义\" class=\"headerlink\" title=\"第二种定义方式，使用@Table和@Column定义字段，具体内容用具体注解定义\"></a>第二种定义方式，使用@Table和@Column定义字段，具体内容用具体注解定义</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Data\n@Table(name &#x3D; &quot;test1&quot;)\npublic class Test1 extends BaseModel &#123;\n\n    @Id\n    @IsAutoIncrement\n    @Column\n    private Integer id;\n\n    @Column\n    private Double price;\n\n    @Column\n    @ColumnType(value &#x3D; MySqlTypeConstant.VARCHAR, length &#x3D; 455)\n    private String name;\n\n    @Column\n    private Date time;\n\n&#125;</code></pre>\n\n<h3 id=\"第三种定义方式，懒人定义，按照驼峰规则转换-不需要对每个字段设置-Column\"><a href=\"#第三种定义方式，懒人定义，按照驼峰规则转换-不需要对每个字段设置-Column\" class=\"headerlink\" title=\"第三种定义方式，懒人定义，按照驼峰规则转换 ,不需要对每个字段设置@Column\"></a>第三种定义方式，懒人定义，按照驼峰规则转换 ,不需要对每个字段设置@Column</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Data\n@Table(isSimple &#x3D; true)\npublic class TestOne  &#123;\n\n   @IsKey\n   @IsAutoIncrement\n   private Integer  id;\n\n   private String name;\n\n   private String type;\n&#125;</code></pre>\n\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://gitee.com/sunchenbin/mybatis-enhance\">ACTable-gitee</a>            </li>\n<li><a href=\"https://www.yuque.com/sunchenbin/actable\">ACTable开源框架文档</a></li>\n<li><a href=\"https://gitee.com/wch2020/create-table\">demo</a></li>\n</ul>\n","text":"mybatis实体类生成数据库为什么要用？因为数据库忘记备份，时间久了数据库没了，所以研究了一下这个东西，感谢大佬开发的反向生成，详细连接地址在文末 JDKjdk版本1.7+ ACTable依赖&lt;dependency&gt; &lt;groupId&gt;com.gitee...","link":"","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[{"name":"Java","slug":"Java","count":9,"path":"api/categories/Java.json"}],"tags":[{"name":"Java","slug":"Java","count":10,"path":"api/tags/Java.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#mybatis%E5%AE%9E%E4%BD%93%E7%B1%BB%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">mybatis实体类生成数据库</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%EF%BC%9F\"><span class=\"toc-text\">为什么要用？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#JDK\"><span class=\"toc-text\">JDK</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ACTable%E4%BE%9D%E8%B5%96\"><span class=\"toc-text\">ACTable依赖</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SpringBoot%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">SpringBoot配置方式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#springboot2-0-%E5%90%AF%E5%8A%A8%E7%B1%BB%E9%9C%80%E8%A6%81%E5%81%9A%E5%A6%82%E4%B8%8B%E9%85%8D%E7%BD%AE-%E5%BF%85%E5%A4%87\"><span class=\"toc-text\">springboot2.0+启动类需要做如下配置(必备)</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E7%A7%8D%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">多种定义方式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%BD%BF%E7%94%A8-Table%E5%92%8C-Column%E6%96%B9%E5%BC%8F%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">第一种定义方式，使用@Table和@Column方式定义</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%BD%BF%E7%94%A8-Table%E5%92%8C-Column%E5%AE%9A%E4%B9%89%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%85%B7%E4%BD%93%E5%86%85%E5%AE%B9%E7%94%A8%E5%85%B7%E4%BD%93%E6%B3%A8%E8%A7%A3%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">第二种定义方式，使用@Table和@Column定义字段，具体内容用具体注解定义</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%89%E7%A7%8D%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%EF%BC%8C%E6%87%92%E4%BA%BA%E5%AE%9A%E4%B9%89%EF%BC%8C%E6%8C%89%E7%85%A7%E9%A9%BC%E5%B3%B0%E8%A7%84%E5%88%99%E8%BD%AC%E6%8D%A2-%E4%B8%8D%E9%9C%80%E8%A6%81%E5%AF%B9%E6%AF%8F%E4%B8%AA%E5%AD%97%E6%AE%B5%E8%AE%BE%E7%BD%AE-Column\"><span class=\"toc-text\">第三种定义方式，懒人定义，按照驼峰规则转换 ,不需要对每个字段设置@Column</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83\"><span class=\"toc-text\">参考</span></a></li></ol></li></ol>","author":{"name":"小海","slug":"blog-author","avatar":"/avatar/avatar.jpg","link":"/","description":"用一点点代码,改变生活","socials":{"github":"https://github.com/xiaohai-store","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_27873145","juejin":"","customs":{"gitee":{"icon":"/svg/gitee-fill-round.svg","link":"https://gitee.com/wch2020"}}}},"mapped":true,"prev_post":{"title":"vue-cropper一个优雅的图片裁剪插件","uid":"736ffb69a5e54f493abeeebf83cab52f","slug":"vue-cropper一个优雅的图片裁剪插件","date":"2023-03-24T08:29:56.000Z","updated":"2023-03-24T08:43:37.208Z","comments":true,"path":"api/articles/vue-cropper一个优雅的图片裁剪插件.json","keywords":null,"cover":null,"text":"vue-cropper一个优雅的图片裁剪插件一、安装使用1.npm 安装npm install vue-cropper 2. 引入 Vue CropperVue2 组件内引入 import &#123; VueCropper &#125; from &#39;vue-croppe...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"web","slug":"web","count":6,"path":"api/categories/web.json"}],"tags":[{"name":"web","slug":"web","count":6,"path":"api/tags/web.json"}],"author":{"name":"小海","slug":"blog-author","avatar":"/avatar/avatar.jpg","link":"/","description":"用一点点代码,改变生活","socials":{"github":"https://github.com/xiaohai-store","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_27873145","juejin":"","customs":{"gitee":{"icon":"/svg/gitee-fill-round.svg","link":"https://gitee.com/wch2020"}}}}},"next_post":{"title":"vue 图片预览组件 v-viewer","uid":"b5984abe1cd42992458002641ebaf9e8","slug":"vue-图片预览组件-v-viewer","date":"2023-03-20T05:58:25.000Z","updated":"2023-03-20T07:04:34.659Z","comments":true,"path":"api/articles/vue-图片预览组件-v-viewer.json","keywords":null,"cover":null,"text":"vue 图片预览组件 v-viewer安装依赖npm install v-viewer --save 在main.js添加import Viewer from &#39;v-viewer&#39; import &#39;viewerjs&#x2F;dist&#x2F;viewe...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"web","slug":"web","count":6,"path":"api/categories/web.json"}],"tags":[{"name":"web","slug":"web","count":6,"path":"api/tags/web.json"}],"author":{"name":"小海","slug":"blog-author","avatar":"/avatar/avatar.jpg","link":"/","description":"用一点点代码,改变生活","socials":{"github":"https://github.com/xiaohai-store","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_27873145","juejin":"","customs":{"gitee":{"icon":"/svg/gitee-fill-round.svg","link":"https://gitee.com/wch2020"}}}}}}