{"title":"centos下docker无法正常下载新的镜像","uid":"5fe8528ea44b3d1e48a9b1de61cf3137","slug":"centos下docker无法正常下载新的镜像","date":"2023-03-29T05:17:28.000Z","updated":"2023-03-30T03:10:34.087Z","comments":true,"path":"api/articles/centos下docker无法正常下载新的镜像.json","keywords":null,"cover":"../images/docker.jpg","content":"<h1 id=\"centos下docker无法正常下载新的镜像\"><a href=\"#centos下docker无法正常下载新的镜像\" class=\"headerlink\" title=\"centos下docker无法正常下载新的镜像\"></a>centos下docker无法正常下载新的镜像</h1><h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>docker无法正常下载镜像，DockerHub上面明明有镜像缺显示not found。最终发现是因为docker版本太旧的问题。导致不支持了</p>\n<h2 id=\"升级docker\"><a href=\"#升级docker\" class=\"headerlink\" title=\"升级docker\"></a>升级docker</h2><p>如果安装的时候使用如下命令，那么恭喜你，你中招了，老老实实升级docker吧</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">yum install docker -y</code></pre>\n\n<h3 id=\"卸载旧版本\"><a href=\"#卸载旧版本\" class=\"headerlink\" title=\"卸载旧版本\"></a>卸载旧版本</h3><p>旧版本的 Docker 名称为<code>docker</code>或<code>docker-engine</code>。在尝试安装新版本之前卸载任何此类旧版本以及相关的依赖项：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine</code></pre>\n\n<p><code>yum</code>如果报告没有安装这些软件包，那也没关系。</p>\n<p>当您卸载 Docker 时，存储在其中的图像、容器、卷和网络<code>/var/lib/docker/</code>不会自动删除。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>注意：更新后可能镜像版本没有指定，存在下载新的镜像,更新需谨慎！！！</p></blockquote>\n<h2 id=\"安装方法\"><a href=\"#安装方法\" class=\"headerlink\" title=\"安装方法\"></a>安装方法</h2><h3 id=\"使用存储库安装\"><a href=\"#使用存储库安装\" class=\"headerlink\" title=\"使用存储库安装\"></a>使用存储库安装</h3><p>在新主机上首次安装 Docker Engine 之前，您需要设置 Docker 存储库。之后，您可以从存储库安装和更新 Docker。</p>\n<h4 id=\"设置存储库\"><a href=\"#设置存储库\" class=\"headerlink\" title=\"设置存储库\"></a>设置存储库</h4><p>安装<code>yum-utils</code>包（提供<code>yum-config-manager</code> 实用程序）并设置存储库。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ sudo yum install -y yum-utils\n\n$ sudo yum-config-manager \\\n    --add-repo \\\n    https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</code></pre>\n\n<h4 id=\"安装-Docker-引擎\"><a href=\"#安装-Docker-引擎\" class=\"headerlink\" title=\"安装 Docker 引擎\"></a>安装 Docker 引擎</h4><ul>\n<li>安装 Docker Engine、containerd 和 Docker Compose：</li>\n</ul>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</code></pre>\n\n<p>如果提示接受 GPG 密钥，请验证指纹是否匹配 <code>060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35</code>，如果匹配，则接受。</p>\n<ul>\n<li>启动docker</li>\n</ul>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ sudo systemctl start docker</code></pre>\n\n<ul>\n<li>此时就可以尝试一下是否可以正常下载镜像了</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://docs.docker.com/engine/install/centos/\">docker文档</a></li>\n</ul>\n","text":"centos下docker无法正常下载新的镜像问题docker无法正常下载镜像，DockerHub上面明明有镜像缺显示not found。最终发现是因为docker版本太旧的问题。导致不支持了 升级docker如果安装的时候使用如下命令，那么恭喜你，你中招了，老老实实升级dock...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"docker","slug":"docker","count":4,"path":"api/categories/docker.json"}],"tags":[{"name":"docker","slug":"docker","count":4,"path":"api/tags/docker.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#centos%E4%B8%8Bdocker%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E4%B8%8B%E8%BD%BD%E6%96%B0%E7%9A%84%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">centos下docker无法正常下载新的镜像</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">问题</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%87%E7%BA%A7docker\"><span class=\"toc-text\">升级docker</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8D%B8%E8%BD%BD%E6%97%A7%E7%89%88%E6%9C%AC\"><span class=\"toc-text\">卸载旧版本</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">安装方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E5%BA%93%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">使用存储库安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%AD%98%E5%82%A8%E5%BA%93\"><span class=\"toc-text\">设置存储库</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Docker-%E5%BC%95%E6%93%8E\"><span class=\"toc-text\">安装 Docker 引擎</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83\"><span class=\"toc-text\">参考</span></a></li></ol></li></ol>","author":{"name":"小海","slug":"blog-author","avatar":"/avatar/avatar.jpg","link":"/","description":"用一点点代码,改变生活","socials":{"github":"https://github.com/xiaohai-store","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_27873145","juejin":"","customs":{"gitee":{"icon":"/svg/gitee-fill-round.svg","link":"https://gitee.com/wch2020"}}}},"mapped":true,"prev_post":{"title":"docker更新翻车现场(mysql)","uid":"f8f3e6fc8bfd30a95b31c3b03dfa61df","slug":"docker更新翻车现场(mysql)","date":"2023-03-29T14:50:48.000Z","updated":"2023-03-30T05:52:46.299Z","comments":true,"path":"api/articles/docker更新翻车现场(mysql).json","keywords":null,"cover":"https://picsum.photos/432/285?random=2","text":"docker更新翻车现场(mysql)由于docker自动拉取最新mysql镜像导致mysql容器无法启动，当日志中出现如下代码： Cannot boot server version 80031 on data directory built by version 80032....","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"docker","slug":"docker","count":4,"path":"api/categories/docker.json"}],"tags":[{"name":"docker","slug":"docker","count":4,"path":"api/tags/docker.json"},{"name":"mysql","slug":"mysql","count":1,"path":"api/tags/mysql.json"}],"author":{"name":"小海","slug":"blog-author","avatar":"/avatar/avatar.jpg","link":"/","description":"用一点点代码,改变生活","socials":{"github":"https://github.com/xiaohai-store","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_27873145","juejin":"","customs":{"gitee":{"icon":"/svg/gitee-fill-round.svg","link":"https://gitee.com/wch2020"}}}}},"next_post":{"title":"nginx配置IP地址透传","uid":"ff5e57e17f9e4c54e6268bc2967d2cf3","slug":"nginx配置IP地址透传","date":"2023-03-28T09:26:41.000Z","updated":"2023-03-28T09:38:21.459Z","comments":true,"path":"api/articles/nginx配置IP地址透传.json","keywords":null,"cover":null,"text":"nginx配置IP地址透传问题我们在用nginx做反向代理的时候，通常会遇到一个问题：服务端解析请求时拿到的都是nginx代理服务器的ip，而不是真实的客户端ip 解决这里介绍nginx在反向代理http服务时如何获取客户端真实ip ipv4和ipv6的ip透传都只需要加这一行便...","link":"","photos":[],"count_time":{"symbolsCount":462,"symbolsTime":"1 mins."},"categories":[{"name":"nginx","slug":"nginx","count":1,"path":"api/categories/nginx.json"}],"tags":[{"name":"nginx","slug":"nginx","count":1,"path":"api/tags/nginx.json"}],"author":{"name":"小海","slug":"blog-author","avatar":"/avatar/avatar.jpg","link":"/","description":"用一点点代码,改变生活","socials":{"github":"https://github.com/xiaohai-store","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_27873145","juejin":"","customs":{"gitee":{"icon":"/svg/gitee-fill-round.svg","link":"https://gitee.com/wch2020"}}}}}}